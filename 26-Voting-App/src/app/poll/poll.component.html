<div>
  <p *ngIf="none; else exists">Poll does not exist.</p>
  <ng-template #exists>
    <form #pollForm="ngForm" *ngIf="pollBS | async as poll; else loading" novalidate>
      <h2 class="poll-name">{{poll.question}}</h2>
      <ng-container *ngIf="poll.type==='radio'; then radio; else checkbox"></ng-container>
      <ng-template #radio>
        <div class="poll-answer" *ngFor="let answer of poll.answers">
          <input type="radio" class="form-control" [id]="answer.id" name="selection" [value]="answer.id" [(ngModel)]="model.selection"><label [for]="answer.id"> {{answer.answer}}: {{answer.votes}}</label>
        </div>
      </ng-template>
      <ng-template #checkbox>
        <div class="poll-answer" *ngFor="let answer of poll.answers">
          <input type="checkbox" class="form-control" [id]="answer.id" [name]="answer.answer" [value]="answer.id" [(ngModel)]="model.selection[answer.id]"><label [for]="answer.id"> {{answer.answer}}: {{answer.votes}}</label>
        </div>
      </ng-template>
      <button class="neutral add-option" *ngIf="loggedin" (click)="editPoll()">Edit Poll</button>
      <p>Diagnostic: {{diagnostic}}</p>
      <div class="buttons" *ngIf="!confirmDelete; else confirm">
        <button type="submit">Submit Vote</button>
        <button class="danger" *ngIf="owned" (click)="confirmDelete=true">Delete Poll</button>
      </div>
      <ng-template #confirm>
        <div class="buttons">
          <p class="confirmation">Are you sure you want to delete this poll?</p>
          <button class="danger" (click)="delete()">Delete Poll</button>
          <button (click)="confirmDelete=false">Cancel</button>
        </div>
      </ng-template>
    </form>
    <ng-template #loading><p>Loading poll&hellip;</p></ng-template>
  </ng-template>
</div>
